#include <ti/devices/msp432p4xx/driverlib/driverlib.h>

/* Standard Includes */
#include <stdint.h>
#include <stdbool.h>
#include <oled.h>


const unsigned char  *point;
unsigned char ACK=0;

const unsigned char F8X16[]=
{
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,// 0
  0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x30,0x00,0x00,0x00,//!1
  0x00,0x10,0x0C,0x06,0x10,0x0C,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//"2
  0x40,0xC0,0x78,0x40,0xC0,0x78,0x40,0x00,0x04,0x3F,0x04,0x04,0x3F,0x04,0x04,0x00,//#3
  0x00,0x70,0x88,0xFC,0x08,0x30,0x00,0x00,0x00,0x18,0x20,0xFF,0x21,0x1E,0x00,0x00,//$4
  0xF0,0x08,0xF0,0x00,0xE0,0x18,0x00,0x00,0x00,0x21,0x1C,0x03,0x1E,0x21,0x1E,0x00,//%5
  0x00,0xF0,0x08,0x88,0x70,0x00,0x00,0x00,0x1E,0x21,0x23,0x24,0x19,0x27,0x21,0x10,//&6
  0x10,0x16,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//'7
  0x00,0x00,0x00,0xE0,0x18,0x04,0x02,0x00,0x00,0x00,0x00,0x07,0x18,0x20,0x40,0x00,//(8
  0x00,0x02,0x04,0x18,0xE0,0x00,0x00,0x00,0x00,0x40,0x20,0x18,0x07,0x00,0x00,0x00,//)9
  0x40,0x40,0x80,0xF0,0x80,0x40,0x40,0x00,0x02,0x02,0x01,0x0F,0x01,0x02,0x02,0x00,//*10
  0x00,0x00,0x00,0xF0,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x1F,0x01,0x01,0x01,0x00,//+11
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xB0,0x70,0x00,0x00,0x00,0x00,0x00,//,12
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x01,0x01,0x01,0x01,//-13
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,0x00,0x00,//.14
  0x00,0x00,0x00,0x00,0x80,0x60,0x18,0x04,0x00,0x60,0x18,0x06,0x01,0x00,0x00,0x00,///15
  0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x0F,0x10,0x20,0x20,0x10,0x0F,0x00,//016
  0x00,0x10,0x10,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//117
  0x00,0x70,0x08,0x08,0x08,0x88,0x70,0x00,0x00,0x30,0x28,0x24,0x22,0x21,0x30,0x00,//218
  0x00,0x30,0x08,0x88,0x88,0x48,0x30,0x00,0x00,0x18,0x20,0x20,0x20,0x11,0x0E,0x00,//319
  0x00,0x00,0xC0,0x20,0x10,0xF8,0x00,0x00,0x00,0x07,0x04,0x24,0x24,0x3F,0x24,0x00,//420
  0x00,0xF8,0x08,0x88,0x88,0x08,0x08,0x00,0x00,0x19,0x21,0x20,0x20,0x11,0x0E,0x00,//521
  0x00,0xE0,0x10,0x88,0x88,0x18,0x00,0x00,0x00,0x0F,0x11,0x20,0x20,0x11,0x0E,0x00,//622
  0x00,0x38,0x08,0x08,0xC8,0x38,0x08,0x00,0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x00,//723
  0x00,0x70,0x88,0x08,0x08,0x88,0x70,0x00,0x00,0x1C,0x22,0x21,0x21,0x22,0x1C,0x00,//824
  0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x00,0x31,0x22,0x22,0x11,0x0F,0x00,//925
  0x00,0x00,0x00,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,//:26
  0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x60,0x00,0x00,0x00,0x00,//;27
  0x00,0x00,0x80,0x40,0x20,0x10,0x08,0x00,0x00,0x01,0x02,0x04,0x08,0x10,0x20,0x00,//<28
  0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x00,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x00,//=29
  0x00,0x08,0x10,0x20,0x40,0x80,0x00,0x00,0x00,0x20,0x10,0x08,0x04,0x02,0x01,0x00,//>30
  0x00,0x70,0x48,0x08,0x08,0x08,0xF0,0x00,0x00,0x00,0x00,0x30,0x36,0x01,0x00,0x00,//?31
  0xC0,0x30,0xC8,0x28,0xE8,0x10,0xE0,0x00,0x07,0x18,0x27,0x24,0x23,0x14,0x0B,0x00,//@32
  0x00,0x00,0xC0,0x38,0xE0,0x00,0x00,0x00,0x20,0x3C,0x23,0x02,0x02,0x27,0x38,0x20,//A33
  0x08,0xF8,0x88,0x88,0x88,0x70,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x11,0x0E,0x00,//B34
  0xC0,0x30,0x08,0x08,0x08,0x08,0x38,0x00,0x07,0x18,0x20,0x20,0x20,0x10,0x08,0x00,//C35
  0x08,0xF8,0x08,0x08,0x08,0x10,0xE0,0x00,0x20,0x3F,0x20,0x20,0x20,0x10,0x0F,0x00,//D36
  0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x20,0x23,0x20,0x18,0x00,//E37
  0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x00,0x03,0x00,0x00,0x00,//F38
  0xC0,0x30,0x08,0x08,0x08,0x38,0x00,0x00,0x07,0x18,0x20,0x20,0x22,0x1E,0x02,0x00,//G39
  0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x20,0x3F,0x21,0x01,0x01,0x21,0x3F,0x20,//H40
  0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//I41
  0x00,0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00,0x00,//J42
  0x08,0xF8,0x88,0xC0,0x28,0x18,0x08,0x00,0x20,0x3F,0x20,0x01,0x26,0x38,0x20,0x00,//K43
  0x08,0xF8,0x08,0x00,0x00,0x00,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x20,0x30,0x00,//L44
  0x08,0xF8,0xF8,0x00,0xF8,0xF8,0x08,0x00,0x20,0x3F,0x00,0x3F,0x00,0x3F,0x20,0x00,//M45
  0x08,0xF8,0x30,0xC0,0x00,0x08,0xF8,0x08,0x20,0x3F,0x20,0x00,0x07,0x18,0x3F,0x00,//N46
  0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x10,0x20,0x20,0x20,0x10,0x0F,0x00,//O47
  0x08,0xF8,0x08,0x08,0x08,0x08,0xF0,0x00,0x20,0x3F,0x21,0x01,0x01,0x01,0x00,0x00,//P48
  0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x18,0x24,0x24,0x38,0x50,0x4F,0x00,//Q49
  0x08,0xF8,0x88,0x88,0x88,0x88,0x70,0x00,0x20,0x3F,0x20,0x00,0x03,0x0C,0x30,0x20,//R50
  0x00,0x70,0x88,0x08,0x08,0x08,0x38,0x00,0x00,0x38,0x20,0x21,0x21,0x22,0x1C,0x00,//S51
  0x18,0x08,0x08,0xF8,0x08,0x08,0x18,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00,//T52
  0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00,//U53
  0x08,0x78,0x88,0x00,0x00,0xC8,0x38,0x08,0x00,0x00,0x07,0x38,0x0E,0x01,0x00,0x00,//V54
  0xF8,0x08,0x00,0xF8,0x00,0x08,0xF8,0x00,0x03,0x3C,0x07,0x00,0x07,0x3C,0x03,0x00,//W55
  0x08,0x18,0x68,0x80,0x80,0x68,0x18,0x08,0x20,0x30,0x2C,0x03,0x03,0x2C,0x30,0x20,//X56
  0x08,0x38,0xC8,0x00,0xC8,0x38,0x08,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00,//Y57
  0x10,0x08,0x08,0x08,0xC8,0x38,0x08,0x00,0x20,0x38,0x26,0x21,0x20,0x20,0x18,0x00,//Z58
  0x00,0x00,0x00,0xFE,0x02,0x02,0x02,0x00,0x00,0x00,0x00,0x7F,0x40,0x40,0x40,0x00,//[59
  0x00,0x0C,0x30,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x06,0x38,0xC0,0x00,//\60
  0x00,0x02,0x02,0x02,0xFE,0x00,0x00,0x00,0x00,0x40,0x40,0x40,0x7F,0x00,0x00,0x00,//]61
  0x00,0x00,0x04,0x02,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//^62
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,//_63
  0x00,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//`64
  0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x19,0x24,0x22,0x22,0x22,0x3F,0x20,//a65
  0x08,0xF8,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x3F,0x11,0x20,0x20,0x11,0x0E,0x00,//b66
  0x00,0x00,0x00,0x80,0x80,0x80,0x00,0x00,0x00,0x0E,0x11,0x20,0x20,0x20,0x11,0x00,//c67
  0x00,0x00,0x00,0x80,0x80,0x88,0xF8,0x00,0x00,0x0E,0x11,0x20,0x20,0x10,0x3F,0x20,//d68
  0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x22,0x22,0x22,0x22,0x13,0x00,//e69
  0x00,0x80,0x80,0xF0,0x88,0x88,0x88,0x18,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//f70
  0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x6B,0x94,0x94,0x94,0x93,0x60,0x00,//g71
  0x08,0xF8,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20,//h72
  0x00,0x80,0x98,0x98,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//i73
  0x00,0x00,0x00,0x80,0x98,0x98,0x00,0x00,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00,//j74
  0x08,0xF8,0x00,0x00,0x80,0x80,0x80,0x00,0x20,0x3F,0x24,0x02,0x2D,0x30,0x20,0x00,//k75
  0x00,0x08,0x08,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,//l76
  0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x20,0x3F,0x20,0x00,0x3F,0x20,0x00,0x3F,//m77
  0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20,//n78
  0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00,//o79
  0x80,0x80,0x00,0x80,0x80,0x00,0x00,0x00,0x80,0xFF,0xA1,0x20,0x20,0x11,0x0E,0x00,//p80
  0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x0E,0x11,0x20,0x20,0xA0,0xFF,0x80,//q81
  0x80,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x20,0x20,0x3F,0x21,0x20,0x00,0x01,0x00,//r82
  0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x33,0x24,0x24,0x24,0x24,0x19,0x00,//s83
  0x00,0x80,0x80,0xE0,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x1F,0x20,0x20,0x00,0x00,//t84
  0x80,0x80,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x1F,0x20,0x20,0x20,0x10,0x3F,0x20,//u85
  0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x00,0x01,0x0E,0x30,0x08,0x06,0x01,0x00,//v86
  0x80,0x80,0x00,0x80,0x00,0x80,0x80,0x80,0x0F,0x30,0x0C,0x03,0x0C,0x30,0x0F,0x00,//w87
  0x00,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x31,0x2E,0x0E,0x31,0x20,0x00,//x88
  0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x80,0x81,0x8E,0x70,0x18,0x06,0x01,0x00,//y89
  0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x21,0x30,0x2C,0x22,0x21,0x30,0x00,//z90
  0x00,0x00,0x00,0x00,0x80,0x7C,0x02,0x02,0x00,0x00,0x00,0x00,0x00,0x3F,0x40,0x40,//{91
  0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,//|92
  0x00,0x02,0x02,0x7C,0x80,0x00,0x00,0x00,0x00,0x40,0x40,0x3F,0x00,0x00,0x00,0x00,//}93
  0x00,0x06,0x01,0x01,0x02,0x02,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,//~94

};
const unsigned char F16x16_Idx[] =
{
    "角度时间设定秒"
};
const unsigned char F16x16[] = {
/*--  文字:  角  --*/
0x20,0x10,0xE8,0x24,0x27,0x24,0x24,0xE4,0x24,0x34,0x2C,0x20,0xE0,0x00,0x00,0x00,
0x80,0x60,0x1F,0x09,0x09,0x09,0x09,0x7F,0x09,0x09,0x49,0x89,0x7F,0x00,0x00,0x00,

/*--  文字:  度  --*/
0x00,0x00,0xFC,0x24,0x24,0x24,0xFC,0x25,0x26,0x24,0xFC,0x24,0x24,0x24,0x04,0x00,
0x40,0x30,0x8F,0x80,0x84,0x4C,0x55,0x25,0x25,0x25,0x55,0x4C,0x80,0x80,0x80,0x00,

/*--  文字:  时  --*/
0x00,0xFC,0x84,0x84,0x84,0xFC,0x00,0x10,0x10,0x10,0x10,0x10,0xFF,0x10,0x10,0x00,
0x00,0x3F,0x10,0x10,0x10,0x3F,0x00,0x00,0x01,0x06,0x40,0x80,0x7F,0x00,0x00,0x00,

/*--  文字:  间  --*/
0x00,0xF8,0x01,0x06,0x00,0xF0,0x12,0x12,0x12,0xF2,0x02,0x02,0x02,0xFE,0x00,0x00,
0x00,0xFF,0x00,0x00,0x00,0x1F,0x11,0x11,0x11,0x1F,0x00,0x40,0x80,0x7F,0x00,0x00,

/*--  文字:  设  --*/
0x40,0x40,0x42,0xCC,0x00,0x40,0xA0,0x9E,0x82,0x82,0x82,0x9E,0xA0,0x20,0x20,0x00,
0x00,0x00,0x00,0x3F,0x90,0x88,0x40,0x43,0x2C,0x10,0x28,0x46,0x41,0x80,0x80,0x00,

/*--  文字:  定  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x10,0x0C,0x44,0x44,0x44,0x44,0x45,0xC6,0x44,0x44,0x44,0x44,0x44,0x14,0x0C,0x00,
0x80,0x40,0x20,0x1E,0x20,0x40,0x40,0x7F,0x44,0x44,0x44,0x44,0x44,0x40,0x40,0x00,

/*--  文字:  秒  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x24,0x24,0xA4,0xFE,0x23,0x22,0x00,0xC0,0x38,0x00,0xFF,0x00,0x08,0x10,0x60,0x00,
0x08,0x06,0x01,0xFF,0x01,0x06,0x81,0x80,0x40,0x40,0x27,0x10,0x0C,0x03,0x00,0x00
};
const unsigned char  OLED_init_cmd[27]=
{
  /*0xae,0x00,0x10,0x40,0xb0,0x81,0xff,0xa1,0xa6,
  0xa8,0x3f,0xc8,0xd3,0x00,0xd5,0x80,0xd8,0x05,
  0xd9,0xf1,0xda,0x12,0xdb,0x30,0x8d,0x14,0xAF*/
     0xAE,//关闭显示
     0xD5,//设置时钟分频因子,震荡频率
     0x80,//[3:0],分频因子;[7:4],震荡频率
     0xA8,//设置驱动路数
     0X3F,//默认0X3F(1/64)
     0xD3,//设置显示偏移
     0X00,//默认为0
     0x40,//设置显示开始行 [5:0],行数.
     0x8D,//电荷泵设置
     0x14,//bit2，开启/关闭
     0x20,//设置内存地址模式
     0x02,//[1:0],00，列地址模式;01，行地址模式;10,页地址模式;默认10;
     0xA1,//段重定义设置,bit0:0,0->0;1,0->127;
     0xC8,//设置COM扫描方向;bit3:0,普通模式;1,重定义模式 COM[N-1]->COM0;N:驱动路数
     0xDA,//设置COM硬件引脚配置
     0x12,//[5:4]配置
     0x81,//对比度设置
     0xEF,//1~255;默认0X7F (亮度设置,越大越亮)
     0xD9,//设置预充电周期
     0xf1,//[3:0],PHASE 1;[7:4],PHASE 2;
     0xDB,//设置VCOMH 电压倍率
     0x30,//[6:4] 000,0.65*vcc;001,0.77*vcc;011,0.83*vcc;
     0xA4,//全局显示开启;bit0:1,开启;0,关闭;(白屏/黑屏)
     0xA6,//设置显示方式;bit0:1,反相显示;0,正常显示
     0xAF,//开启显示
};
//void delay_us(unsigned int us_time)
//{
//    while(us_time--);
//}
void IO_init(void)
{
    MAP_GPIO_setAsInputPinWithPullDownResistor(GPIO_PORT_P1 , GPIO_PIN6);
    MAP_GPIO_setAsOutputPin(GPIO_PORT_P1, GPIO_PIN7);
    IIC_SDA_1;
    IIC_SCK_1;
    //delay_us(2);
}

/**************************IIC模块发送函数************************************************

 *************************************************************************/
//写入  最后将SDA拉高，以等待从设备产生应答
void IIC_write(unsigned char date)
{
    unsigned char i, temp;
    temp = date;

    for(i=0; i<8; i++){
        IIC_SCK_0;
        //delay_us(1);

        if ((temp&0x80)==0){
            IIC_SDA_0;
        }else {
            IIC_SDA_1;
        }
        //delay_us(1);
        temp = temp << 1;
        IIC_SCK_1;
        //delay_us(1);

    }
    IIC_SCK_0;
    //delay_us(1);
    IIC_SDA_1;
    //delay_us(1);
    IIC_SCK_1;
    //delay_us(1);
//                              不需要应答
//  if (READ_SDA==0)
//      ACK = 1;
//  else ACK =0;
    IIC_SCK_0;
    //delay_us(1);

}
//启动信号
//SCL在高电平期间，SDA由高电平向低电平的变化定义为启动信号
void IIC_start()
{
    IIC_SDA_1;
    //delay_us(1);
    IIC_SCK_1;                  //所有操作结束释放SCL
    //delay_us(1);
    IIC_SDA_0;
    //delay_us(1);
    IIC_SCK_0;
    //delay_us(1);

        IIC_write(0x78);

}

//停止信号
//SCL在高电平期间，SDA由低电平向高电平的变化定义为停止信号
void IIC_stop()
{
    IIC_SDA_0;
    //delay_us(1);
    IIC_SCK_1;
    //delay_us(1);
    IIC_SDA_1;
    //delay_us(1);
}

void OLED_send_cmd(unsigned char o_command)
{
    IIC_start();
    IIC_write(0x00);
    IIC_write(o_command);
    IIC_stop();
}
void OLED_send_data(unsigned char o_data)
{
    IIC_start();
    IIC_write(0x40);
    IIC_write(o_data);
    IIC_stop();
}
void OLED_Column_set(unsigned char column)
{
    OLED_send_cmd(0x10|(column>>4));    //设置列地址高位
    OLED_send_cmd(0x00|(column&0x0f));   //设置列地址低位
}
void OLED_Page_set(unsigned char page)
{
    OLED_send_cmd(0xb0+page);
}
void OLED_Pos_set(unsigned char page, unsigned char column)
{
    OLED_send_cmd(0xb0+page);
    OLED_send_cmd((0x10|(column&0xf0)>>4));
    OLED_send_cmd(0x01|(column&0x0f));
}
void OLED_clear(void)
{
    unsigned char page,column;
    for(page=0;page<8;page++)             //page loop
    {
        OLED_Pos_set(page,0);
        for(column=0;column<128;column++) //column loop
        {
            OLED_send_data(0x00);
        }
    }
}
void OLED_full(void)
{
    unsigned char page,column;
    for(page=0;page<8;page++)             //page loop
    {
        OLED_Pos_set(page,0);
        for(column=0;column<128;column++)   //column loop
        {
            OLED_send_data(0xff);
        }
    }
}
void OLED_init(void)
{
    unsigned char i;

    IO_init();
    for(i=0;i<27;i++)
    {
        OLED_send_cmd(OLED_init_cmd[i]);
    }
}

void Picture_display(const unsigned char *ptr_pic)
{
    unsigned char page,column;
    for(page=0;page<(64/8);page++)        //page loop
    {
        OLED_Pos_set(page,0);
        for(column=0;column<128;column++)   //column loop
        {
            OLED_send_data(*ptr_pic++);
        }
    }
}
void Picture_ReverseDisplay(const unsigned char *ptr_pic)
{
    unsigned char page,column,data;
    for(page=0;page<(64/8);page++)        //page loop
    {
        OLED_Pos_set(page,0);
        for(column=0;column<128;column++)   //column loop
        {
            data=*ptr_pic++;
            data=~data;
            OLED_send_data(data);
        }
    }
}
void OLED_P8x16Str(unsigned char x,unsigned char y,unsigned char ch[])
{
    unsigned char c=0,i=0,j=0;

    while (ch[j]!='\0')
    {
        c =ch[j]-32;
        if(y>120){y=0;x++;}
        OLED_Pos_set(x,y);
        for(i=0;i<8;i++)
            OLED_send_data(F8X16[c*16+i]);
        OLED_Pos_set(x+1,y);
        for(i=0;i<8;i++)
            OLED_send_data(F8X16[c*16+i+8]);
        y+=8;
        j++;
    }
}
void OLED_P16x16Str(unsigned char x,unsigned char y,unsigned char ch[])
{
    unsigned char wm=0,ii = 0;
    unsigned int adder=1;

    while(ch[ii] != '\0')
    {
        wm = 0;
        adder = 1;
        while(F16x16_Idx[wm] > 127)
        {
            if(F16x16_Idx[wm] == ch[ii])
            {
                if(F16x16_Idx[wm + 1] == ch[ii + 1])
                {
                    adder = wm * 16;
                    break;
                }
            }
            wm += 2;
        }
        if(y>112){y=0;x++;}
        OLED_Pos_set(x , y);
        if(adder != 1)// 显示汉字
        {
            OLED_Pos_set(x , y);
            for(wm = 0;wm < 16;wm++)
            {
                OLED_send_data(F16x16[adder]);
                adder += 1;
            }
            OLED_Pos_set(x + 1,y);
            for(wm = 0;wm < 16;wm++)
            {
                OLED_send_data(F16x16[adder]);
                adder += 1;
            }
        }
        else              //显示空白字符
        {
            ii += 1;
            OLED_Pos_set(x,y);
            for(wm = 0;wm < 16;wm++)
            {
                OLED_send_data(0);
            }
            OLED_Pos_set(x + 1,y);
            for(wm = 0;wm < 16;wm++)
            {
                OLED_send_data(0);
            }
        }
        y += 16;
        ii += 2;
    }
}

void OLED_Print(unsigned char x, unsigned char y, unsigned char ch[])
{
    unsigned char ch2[3];
    unsigned char ii=0;
    while(ch[ii] != '\0')
    {
        if(ch[ii] > 127)
        {
            ch2[0] = ch[ii];
            ch2[1] = ch[ii + 1];
            ch2[2] = '\0';          //汉字为两个字节
            OLED_P16x16Str(x , y, ch2);  //显示汉字
            y += 16;
            ii += 2;
        }
        else
        {
            ch2[0] = ch[ii];
            ch2[1] = '\0';          //字母占一个字节
            OLED_P8x16Str(x , y , ch2);  //显示字母
            y += 8;
            ii+= 1;
        }
    }
}
void OLED_P8x16Str_R(unsigned char x,unsigned char y,unsigned char ch[])
{
    unsigned char c=0,i=0,j=0;

    while (ch[j]!='\0')
    {
        c =ch[j]-32;
        if(y>120){y=0;x++;}
        OLED_Pos_set(x,y);
        for(i=0;i<8;i++)
            OLED_send_data(~F8X16[c*16+i]);
        OLED_Pos_set(x+1,y);
        for(i=0;i<8;i++)
            OLED_send_data(~F8X16[c*16+i+8]);
        y+=8;
        j++;
    }
}
void OLED_P16x16Str_R(unsigned char x,unsigned char y,unsigned char ch[])
{
    unsigned char wm=0,ii = 0;
    unsigned int adder=1;

    while(ch[ii] != '\0')
    {
        wm = 0;
        adder = 1;
        while(F16x16_Idx[wm] > 127)
        {
            if(F16x16_Idx[wm] == ch[ii])
            {
                if(F16x16_Idx[wm + 1] == ch[ii + 1])
                {
                    adder = wm * 16;
                    break;
                }
            }
            wm += 2;
        }
        if(y>112){y=0;x++;}
        OLED_Pos_set(x , y);
        if(adder != 1)// 显示汉字
        {
            OLED_Pos_set(x , y);
            for(wm = 0;wm < 16;wm++)
            {
                OLED_send_data(~F16x16[adder]);
                adder += 1;
            }
            OLED_Pos_set(x + 1,y);
            for(wm = 0;wm < 16;wm++)
            {
                OLED_send_data(~F16x16[adder]);
                adder += 1;
            }
        }
        else              //显示空白字符
        {
            ii += 1;
            OLED_Pos_set(x,y);
            for(wm = 0;wm < 16;wm++)
            {
                OLED_send_data(0xff);
            }
            OLED_Pos_set(x + 1,y);
            for(wm = 0;wm < 16;wm++)
            {
                OLED_send_data(0xff);
            }
        }
        y += 16;
        ii += 2;
    }
}

void OLED_Print_R(unsigned char x, unsigned char y, unsigned char ch[])
{
    unsigned char ch2[3];
    unsigned char ii=0;
    while(ch[ii] != '\0')
    {
        if(ch[ii] > 127)
        {
            ch2[0] = ch[ii];
            ch2[1] = ch[ii + 1];
            ch2[2] = '\0';          //汉字为两个字节
            OLED_P16x16Str_R(x , y, ch2);  //显示汉字
            y += 16;
            ii += 2;
        }
        else
        {
            ch2[0] = ch[ii];
            ch2[1] = '\0';          //字母占一个字节
            OLED_P8x16Str_R(x , y , ch2);  //显示字母
            y += 8;
            ii+= 1;
        }
    }
}

